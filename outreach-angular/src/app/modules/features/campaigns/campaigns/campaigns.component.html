<div class="campaigns-container">
  <div class="header">
    <h2>Campaigns</h2>
    <button class="btn-add" (click)="openAdd()">+ Add Campaign</button>
  </div>

  <div class="cards-wrapper">
    <div class="campaign-card" *ngFor="let c of campaigns">
      <div class="card-content">
        <h4>{{ c.name }}</h4>
        <p>{{ c.description || 'No description' }}</p>
        <span class="status" [ngClass]="c.status">{{ c.status }}</span>
      </div>

      <div class="card-actions">
        <button class="btn-edit" (click)="openEdit(c)">✏️ Edit</button>
        <button class="btn-delete" (click)="deleteCampaign(c._id)">🗑️ Delete</button>
        <button *ngIf="c.status === 'Draft'" class="btn-launch" (click)="launchCampaign(c)">🚀 Launch</button>
        <button class="btn-copy" (click)="copyCampaign(c)">📄 Copy</button>
      </div>
    </div>
  </div>

  <div class="modal-backdrop" *ngIf="displayModal">
    <div class="modal-content">
      <div class="modal-header">
        <h5>{{ editingCampaign ? 'Edit Campaign' : 'Add Campaign' }}</h5>
        <button class="close" (click)="closeModal()">×</button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label>Campaign Name</label>
          <input type="text" [(ngModel)]="form.name" placeholder="Enter campaign name" />
        </div>

        <div class="form-group">
          <label>Description</label>
          <textarea rows="2" [(ngModel)]="form.description" placeholder="Enter description"></textarea>
        </div>

        <div class="form-group">
          <label>Select Template</label>
          <select [(ngModel)]="selectedTemplate" (ngModelChange)="selectTemplate($event)">
            <option [ngValue]="null">-- Select Template --</option>
            <option *ngFor="let t of templates" [ngValue]="t">{{ t.name }}</option>
          </select>
        </div>

        <div *ngIf="form.message">
          <div class="form-group">
            <label>Message Type</label>
            <input type="text" [(ngModel)]="form.message.type" readonly />
          </div>

          <div class="form-group">
            <label>Message Text</label>
            <textarea rows="4" [(ngModel)]="form.message.text" placeholder="Message content"></textarea>
          </div>

          <div class="form-group" *ngIf="form.message.type === 'Text-Image'">
            <label>Image URL</label>
            <input type="text" [(ngModel)]="form.message.imageUrl" placeholder="Image URL" />
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn-cancel" (click)="closeModal()">Cancel</button>
        <button class="btn-save" (click)="saveCampaign()">{{ editingCampaign ? 'Update' : 'Save' }}</button>
      </div>
    </div>
  </div>
</div>
