<div class="dashboard-container" style="padding: 2rem; font-family: Arial, sans-serif; background: #f9fafb; min-height: 100vh;">

  <!-- Top Cards -->
  <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
    <div style="flex: 1; background: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 1rem;">
      <div style="background: #e0d7ff; border-radius: 50%; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; color: #6b46c1; font-weight: bold; font-size: 24px;">C</div>
      <div>
        <div style="font-size: 1.5rem; font-weight: 700;">{{ totalCampaigns }}</div>
        <div style="color: #718096;">Total Campaigns</div>
      </div>
    </div>
    <div style="flex: 1; background: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 1rem;">
      <div style="background: #d6f6ff; border-radius: 50%; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; color: #3182ce; font-weight: bold; font-size: 24px;">O</div>
      <div>
        <div style="font-size: 1.5rem; font-weight: 700;">{{ totalContacts }}</div>
        <div style="color: #718096;">Total Contacts</div>
      </div>
    </div>
    <div style="flex: 1; background: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 1rem;">
      <div style="background: #ffe4d6; border-radius: 50%; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; color: #dd6b20; font-weight: bold; font-size: 24px;">T</div>
      <div>
        <div style="font-size: 1.5rem; font-weight: 700;">{{ totalTemplates }}</div>
        <div style="color: #718096;">Total Templates</div>
      </div>
    </div>
    <div style="flex: 1; background: white; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 1rem;">
      <div style="background: #ffe4f0; border-radius: 50%; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; color: #d53f8c; font-weight: bold; font-size: 24px;">S</div>
      <div>
        <div style="font-size: 1.5rem; font-weight: 700;">{{ totalSentMessages }}</div>
        <div style="color: #718096;">Total Sent Messages</div>
      </div>
    </div>
  </div>

  <!-- Date Range Picker -->
  <div style="margin-bottom: 1rem; display: flex; justify-content: center; gap: 1rem; align-items: center;">
    <p-calendar [(ngModel)]="dateRange" selectionMode="range" dateFormat="yy-mm-dd" (onSelect)="onDateRangeChange()" placeholder="Select Date Range"></p-calendar>
    <button pButton type="button" label="Refresh Data" (click)="loadData()" class="p-button-secondary"></button>
  </div>

  <!-- Charts Section -->
  <div style="background: white; border-radius: 8px; padding: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); min-height: 300px; display: flex; gap: 2rem; justify-content: center; flex-wrap: wrap;">
    <div style="flex: 1; min-width: 300px; max-width: 400px;">
      <h3 style="text-align: center; margin-bottom: 1rem;">Campaigns Sent Over Time</h3>
      <canvas baseChart
              [data]="lineChartData"
              [options]="lineChartOptions"
              [type]="lineChartType"
              style="height: 400px; width:400px;"></canvas>
    </div>
    <div style="flex: 1; min-width: 300px; max-width: 400px;">
      <h3 style="text-align: center; margin-bottom: 1rem;">Templates Created by Type</h3>
      <canvas baseChart
              [data]="doughnutChartData"
              [options]="doughnutChartOptions"
              [type]="doughnutChartType"
              style="height: 300px;"></canvas>
    </div>
    <div style="flex: 1; min-width: 300px; max-width: 400px;">
      <h3 style="text-align: center; margin-bottom: 1rem;">Campaign Status</h3>
      <canvas baseChart
              [data]="pieChartData"
              [options]="pieChartOptions"
              [type]="pieChartType"
              style="height: 300px;"></canvas>
    </div>
  </div>

  <!-- Tables Section -->
  <div style="margin-top: 2rem; display: flex; gap: 2rem; flex-wrap: wrap;">
    <div style="flex: 1; min-width: 400px; background: white; border-radius: 8px; padding: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
      <h3 style="margin-bottom: 1rem;">Latest Launched Campaigns</h3>
      <p-table [value]="latestCampaigns" class="p-datatable-sm">
        <ng-template pTemplate="header">
          <tr>
            <th>Name</th>
            <th>Status</th>
            <th>Launched At</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-campaign>
          <tr>
            <td>{{ campaign.name }}</td>
            <td>{{ campaign.status }}</td>
            <td>{{ campaign.launchedAt | date:'short' }}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
    <div style="flex: 1; min-width: 400px; background: white; border-radius: 8px; padding: 2rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
      <h3 style="margin-bottom: 1rem;">Most Used Tags</h3>
      <p-table [value]="mostUsedTags" class="p-datatable-sm">
        <ng-template pTemplate="header">
          <tr>
            <th>Tag</th>
            <th>Count</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-tag>
          <tr>
            <td>{{ tag.tag }}</td>
            <td>{{ tag.count }}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

</div>
